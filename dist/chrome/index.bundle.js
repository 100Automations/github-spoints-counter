(()=>{"use strict";var e={620:function(e,t){var s,n,o=this&&this.__classPrivateFieldGet||function(e,t,s,n){if("a"===s&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===s?n:"a"===s?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.composeRegex=t.NewProjectsColumnElement=t.ClassicColumnElement=void 0;class r{constructor(e){s.add(this),this.calculateValue=e=>{o(this,s,"m",n).call(this);try{[this.value,this.missingValue]=this.extractValue(this.cards,e)}catch(e){}},this.value=0,this.missingValue=0,this.element=e}rewriteCounter(e){this.columnCounter.textContent=`${e}: ${this.value.toFixed(1)} | Issues without ${e} label: ${this.missingValue}`}resetCounter(){this.columnCounter.textContent=this.resetText}}s=new WeakSet,n=function(){this.value=0,this.missingValue=0},t.ClassicColumnElement=class extends r{constructor(e){super(e),this.cachedResetText=this.columnCounter.textContent}get id(){return this.element.id}get cards(){return this.element.getElementsByClassName("project-card")}get columnCounter(){return this.element.getElementsByClassName("js-column-card-count")[0]}get resetText(){return this.cachedResetText}extractValue(e,t){let s=0,n=0;for(const o of e)if(o.dataset.cardType.includes("issue")&&!o.classList.contains("d-none")){const e=o.getElementsByClassName("IssueLabel"),r=this.extractLabelValue(e,t);"number"==typeof r?s+=r:n++}return[s,n]}extractLabelValue(e,t){for(const s of e){const e=s.textContent.match(t);if(e)return parseFloat(e[1])}return null}},t.NewProjectsColumnElement=class extends r{constructor(e){super(e),this.cachedResetText=this.columnCounter.textContent}get id(){return this.element.id}get cards(){return this.element.getElementsByClassName("card__CardBase-sc-0-0")}get columnCounter(){return this.element.querySelector("[data-test-id~='column-items-counter']")}get resetText(){return this.cachedResetText}extractValue(e,t){let s=0,n=0;for(const o of e){const e=o.querySelectorAll("[data-test-id~='issue-label']"),r=this.extractLabelValue(e,t);"number"==typeof r?s+=r:n++}return[s,n]}extractLabelValue(e,t){for(const s of e){const e=s.textContent.match(t);if(e)return parseFloat(e[1])}return null}},t.composeRegex=function(e){return new RegExp(`.*${e}:.*?(\\d+\\.?[\\d]*).*`)}},828:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setData=t.getData=void 0,t.getData=function(e){return browser.storage.local.get(e)},t.setData=function(e){return browser.storage.local.set(e)}},166:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectBoard=void 0;const n=s(620);t.ProjectBoard=class{constructor(){this.columns=this.collectColumns()}get targetNode(){return this.isClassic()?document.getElementsByClassName("project-columns")[0]:document.querySelector("[data-test-id~='app-root']")}isClassic(){const e=document.getElementsByTagName("turbo-frame");return Boolean(e.length)}collectColumns(){let e;const t=this.isClassic();e=t?document.getElementsByClassName("project-column"):document.getElementsByClassName("column-frame__StyledFrame-sc-0-0");let s=[];for(const o of e)o instanceof HTMLElement&&(t?s.push(new n.ClassicColumnElement(o)):s.push(new n.NewProjectsColumnElement(o)));return s}}},593:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.onKey=t.debounce=t.combineClasses=void 0,t.combineClasses=function(...e){return e.filter((e=>"string"==typeof e)).join(" ")},t.debounce=function(e,t=500){let s;return()=>{clearTimeout(s),s=setTimeout((()=>{e()}),t)}},t.onKey=function(e,...t){return s=>{t.includes(s.key)&&(s.preventDefault(),e(s))}}}},t={};function s(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,s),r.exports}(()=>{const e=s(620),t=s(166),n=s(828),o=s(593);let r;const c=new t.ProjectBoard;function a(e,t){const s=c.targetNode,n={childList:!0,subtree:!0},a=(0,o.debounce)((()=>l(e,(()=>{r.disconnect(),r.observe(s,n)}))),t);r=new MutationObserver(a),r.observe(document,n)}function l(t,s){!function(t){const s=(0,e.composeRegex)(t);for(const e of c.columns)e.calculateValue(s),e.rewriteCounter(t)}(t),s()}browser.runtime.onMessage.addListener((e=>{r&&r.disconnect(),"mutate"==e.task?(l(e.filter,(()=>{})),a(e.filter,500)):"reset"==e.task&&function(){for(const e of c.columns)e.resetCounter()}()})),(0,n.getData)({rows:[],currentSelected:null}).then((e=>{a(e.rows[e.currentSelected].text,1e3),l(e.rows[e.currentSelected].text,(()=>{}))})).catch((e=>{console.log(e)}))})()})();
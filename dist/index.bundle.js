(()=>{"use strict";var e={620:function(e,t){var n,o,s,r=this&&this.__classPrivateFieldGet||function(e,t,n,o){if("a"===n&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?o:"a"===n?o.call(e):o?o.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.composeRegex=t.ColumnElement=void 0,t.ColumnElement=class{constructor(e){n.add(this),this.value=0,this.missingValue=0,this.unpackElement(e)}unpackElement(e){this.id=e.id,this.cards=e.getElementsByClassName("project-card"),this.columnCounter=e.getElementsByClassName("js-column-card-count")[0],this.resetText=this.columnCounter.textContent}calculateValue(e){r(this,n,"m",o).call(this);for(const t of this.cards)if(t.dataset.cardType.includes("issue")&&!t.classList.contains("d-none")){const o=t.getElementsByClassName("IssueLabel"),i=r(this,n,"m",s).call(this,o,e);"number"==typeof i?this.value+=i:this.missingValue++}}rewriteCounter(e){this.columnCounter.textContent=`${e}: ${this.value.toFixed(1)} | missing: ${this.missingValue}`}resetCounter(){this.columnCounter.textContent=this.resetText}},n=new WeakSet,o=function(){this.value=0,this.missingValue=0},s=function(e,t){for(const n of e){const e=n.textContent.match(t);if(e)return parseFloat(e[1])}return null},t.composeRegex=function(e){return new RegExp(`.*${e}:.*?(\\d+\\.?[\\d]*).*`)}},828:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setData=t.getData=void 0,t.getData=function(e){return browser.storage.local.get(e)},t.setData=function(e){return browser.storage.local.set(e)}},607:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(s,r){function i(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=n(620),r=n(828),i=n(593);let a;const c=function(){const e=document.getElementsByClassName("project-column");let t=[];for(const n of e)n instanceof HTMLElement&&t.push(new s.ColumnElement(n));return t}();function u(e,t){const n=document.getElementsByClassName("project-columns")[0],o={childList:!0,subtree:!0},s=(0,i.debounce)((()=>l(e,(()=>{a.disconnect(),a.observe(n,o)}))),t);a=new MutationObserver(s),a.observe(n,o)}function l(e,t){!function(e){const t=(0,s.composeRegex)(e);for(const n of c)n.calculateValue(t),n.rewriteCounter(e)}(e),t()}browser.runtime.onMessage.addListener((e=>{a&&a.disconnect(),"mutate"==e.task?(l(e.filter,(()=>{})),u(e.filter,500)):"reset"==e.task&&function(){for(const e of c)e.resetCounter()}()})),browser.runtime.onInstalled.addListener((({reason:e,temporary:t})=>o(void 0,void 0,void 0,(function*(){if("install"==e){console.log("this actually ran");const e=browser.runtime.getURL("https://100automations.github.io/github-story-points-calculator/#steps");yield browser.tabs.create({url:e})}})))),(0,r.getData)({rows:[],currentOn:null}).then((e=>{l(e.rows[e.currentOn].text,(()=>{})),u(e.rows[e.currentOn].text,1e3)})).catch((e=>{console.log(e)}))},593:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.debounce=void 0,t.debounce=function(e,t=500){let n;return()=>{clearTimeout(n),n=setTimeout((()=>{e()}),t)}}}},t={};!function n(o){var s=t[o];if(void 0!==s)return s.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}(607)})();